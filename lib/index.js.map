{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;AAAA;;AACA;;;;AACA;;;;;;IAEM,Q,GAAN,MAAM,QAAN,SAAuB,gBAAM,SAA7B,CAAuC;AACrC,cAAY,KAAZ,EAAmB;AACjB,UAAM,KAAN;AACA,SAAK,KAAL,GAAa,EAAE,KAAK,EAAP,EAAb;AACD;AACD,sBAAoB;AAClB,SAAK,aAAL,CAAmB,KAAK,KAAL,CAAW,QAAX,CAAoB,CAApB,CAAnB;AACD;AACD,sBAAoB,SAApB,EAA+B;AAC7B,QAAI,UAAU,QAAV,CAAmB,CAAnB,MAA0B,KAAK,KAAL,CAAW,QAAX,CAAoB,CAApB,CAA9B,EAAsD;AACpD,WAAK,aAAL,CAAmB,UAAU,QAAV,CAAmB,CAAnB,CAAnB;AACD;AACF;AACD,wBAAsB,SAAtB,EAAiC,SAAjC,EAA4C;AAC1C,WAAO,UAAU,QAAV,CAAmB,CAAnB,MAA0B,KAAK,KAAL,CAAW,QAAX,CAAoB,CAApB,CAA1B,IACH,UAAU,GAAV,KAAkB,KAAK,KAAL,CAAW,GADjC;AAED;AACD,WAAS;AACP,WAAO,uCAAM,yBACX;AACE,gBAAQ,KAAK,KAAL,CAAW;AADrB,OADK,GAAP;AAKD;AACD,gBAAe,IAAf,EAAqB;AACnB,sBAAU,IAAV,EAAgB,IAAhB,CAAqB,OAAO;AAC1B,WAAK,QAAL,CAAc,EAAE,GAAF,EAAd;AACD,KAFD;AAGD;AA5BoC,C;;;AA+BvC,OAAO,OAAP,GAAiB;AACf,aAAY;AACV,QAAI,iBAAJ,EAAsB;AACpB,wBAAiB,oBAAjB,CAAsC,QAAtC,GAAiD,QAAjD;AACA,wBAAiB,oBAAjB,CAAsC,IAAtC,GAA6C,QAA7C;AACD;AACF,GANc;;AAQf,eAAc;AACZ,QAAI,iBAAJ,EAAsB;AACpB,wBAAiB,oBAAjB,CAAsC,QAAtC,GAAiD,IAAjD;AACA,wBAAiB,oBAAjB,CAAsC,IAAtC,GAA6C,IAA7C;AACD;AACF;AAbc,CAAjB","file":"index.js","sourcesContent":["import {render as renderUML} from '@shd101wyy/mume/out/src/puml'\nimport markdownRenderer from 'inkdrop'\nimport React from 'react'\n\nclass PlantUML extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { svg: '' }\n  }\n  componentDidMount() {\n    this.renderDiagram(this.props.children[0])\n  }\n  componentWillUpdate(nextProps) {\n    if (nextProps.children[0] !== this.props.children[0]) {\n      this.renderDiagram(nextProps.children[0])\n    }\n  }\n  shouldComponentUpdate(nextProps, nextState) {\n    return nextProps.children[0] !== this.props.children[0] ||\n        nextState.svg !== this.state.svg\n  }\n  render() {\n    return < div dangerouslySetInnerHTML = {\n      {\n        __html: this.state.svg\n      }\n    } />\n  }\n  renderDiagram (code) {\n    renderUML(code).then(svg => {\n      this.setState({ svg })\n    })\n  }\n}\n\nmodule.exports = {\n  activate () {\n    if (markdownRenderer) {\n      markdownRenderer.remarkCodeComponents.plantuml = PlantUML\n      markdownRenderer.remarkCodeComponents.puml = PlantUML\n    }\n  },\n\n  deactivate () {\n    if (markdownRenderer) {\n      markdownRenderer.remarkCodeComponents.plantuml = null\n      markdownRenderer.remarkCodeComponents.puml = null\n    }\n  }\n}\n"]}